<!DOCTYPE html>
<html lang="en">
  <head>
    <title>XCEStaticState  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="XCEStaticState  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">XCEStaticState Docs</a> (100% documented)</p>
        <p class="header-right"><a href="https://github.com/XCEssentials/StaticState"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">XCEStaticState Reference</a>
        <img id="carat" src="img/carat.png" />
        XCEStaticState  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/Errors.html">Errors</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/Errors.html#/s:VO14XCEStaticState6Errors10WrongState">– WrongState</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/State.html">State</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Stateful.html">Stateful</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/StatefulWithHelpers.html">StatefulWithHelpers</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p><a href="https://github.com/XCEssentials/StaticState/releases"><img src="https://img.shields.io/github/tag/XCEssentials/StaticState.svg" alt="GitHub tag"></a>
<a href="https://cocoapods.org/?q=XCEStaticState"><img src="https://img.shields.io/cocoapods/v/XCEStaticState.svg" alt="CocoaPods"></a>
<a href="https://cocoapods.org/?q=XCEStaticState"><img src="https://img.shields.io/cocoapods/p/XCEStaticState.svg" alt="CocoaPods"></a>
<a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/github/license/XCEssentials/StaticState.svg" alt="license"></a></p>
<h2 id='introduction' class='heading'>Introduction</h2>

<p>Turn any object into a discrete system where each state is a static data container.</p>
<h2 id='how-to-install' class='heading'>How to install</h2>

<p>The recommended way is to install using <a href="https://cocoapods.org/?q=XCEStaticState">CocoaPods</a>.</p>
<h2 id='how-it-works' class='heading'>How it works</h2>

<p>This library allows to turn any object into <a href="https://en.wikipedia.org/wiki/Discrete_system">discrete system</a> by defining a number of distinct states for any object and then set any of these states as current state of the object. Same state can be re-set multiple times without any limitations.</p>
<h2 id='how-to-use' class='heading'>How to use</h2>

<p>A typical use case for this library is to store different set of internal data at different points of time as well as indicating current internal state of a given object. Any object can only be in one particular state at any point of time, or current state might be undefined.</p>
<h3 id='state' class='heading'>State</h3>

<p>Let&rsquo;s say we have class <code>MyView</code>&hellip;</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">MyView</span>
<span class="p">{</span>
    <span class="c1">// class definition goes here...</span>
<span class="p">}</span>
</code></pre>

<p>&hellip; and it can only be in 3 different states: <code>Normal</code>, <code>Disabled</code> or <code>Highlighted</code>. Every state must be declared as an instantiatable type that conforms to <code>State</code> protocol. For the sake of simplicity, lets assume that <code>Normal</code> contains no extra data, <code>Disabled</code> holds opacity amount and <code>Highlighted</code> contains <code>color</code> value which is just a number that represents a code for color.</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">MyView</span>
<span class="p">{</span>
    <span class="kd">struct</span> <span class="kt">Normal</span><span class="p">:</span> <span class="kt">State</span> <span class="p">{</span> <span class="p">}</span>

    <span class="c1">//===</span>

    <span class="kd">struct</span> <span class="kt">Disabled</span><span class="p">:</span> <span class="kt">State</span>
    <span class="p">{</span>
        <span class="k">var</span> <span class="nv">opacity</span><span class="p">:</span> <span class="kt">Float</span>
    <span class="p">}</span>

    <span class="c1">//===</span>

    <span class="kd">struct</span> <span class="kt">Highlighted</span><span class="p">:</span> <span class="kt">State</span>
    <span class="p">{</span>
        <span class="k">let</span> <span class="nv">color</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='stateful' class='heading'>Stateful</h3>

<p>The object which internal state we want to track must conform to <code>Stateful</code> protocol. This protocol does not require to implement anything, but gives exclusive access to special dynamic property:</p>
<pre class="highlight swift"><code><span class="k">var</span> <span class="nv">state</span><span class="p">:</span> <span class="kt">State</span><span class="p">?</span>
</code></pre>

<p>We can set current state as follows:</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">MyView</span><span class="p">:</span> <span class="kt">Stateful</span> <span class="p">{</span> <span class="p">}</span>
<span class="c1">// ...</span>
<span class="k">let</span> <span class="nv">aView</span> <span class="o">=</span> <span class="kt">MyView</span><span class="p">()</span>
<span class="c1">// ...</span>
<span class="n">aView</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="kt">MyView</span><span class="o">.</span><span class="kt">Disabled</span><span class="p">(</span><span class="nv">opacity</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="n">aView</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="kt">MyView</span><span class="o">.</span><span class="kt">Normal</span><span class="p">()</span>
<span class="n">aView</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="kt">MyView</span><span class="o">.</span><span class="kt">Highlighted</span><span class="p">(</span><span class="nv">color</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1">// 'aView.state' is now 'Highlighted' with 'color' equal to '1'</span>
</code></pre>

<p>Note, that in the beginning the <code>state</code> property is <code>nil</code> until you set a value explicitly; after this it holds assigned value indefinitely until you assign another value, <code>nil</code> or the object itself is deallocated.</p>
<pre class="highlight swift"><code><span class="k">var</span> <span class="nv">aView</span> <span class="o">=</span> <span class="kt">MyView</span><span class="p">()</span>
<span class="c1">// ...</span>
<span class="n">aView</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="kt">MyView</span><span class="o">.</span><span class="kt">Normal</span><span class="p">()</span>
<span class="c1">// 'aView.state' is now 'Normal'</span>
<span class="c1">// ...</span>
<span class="n">aView</span> <span class="o">=</span> <span class="kt">MyView</span><span class="p">()</span> <span class="c1">// released previosly created object of type 'MyView'</span>
<span class="c1">// 'aView.state' is now 'nil'</span>
<span class="n">aView</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="kt">MyView</span><span class="o">.</span><span class="kt">Disabled</span><span class="p">(</span><span class="nv">opacity</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="c1">// 'aView.state' is now 'Disabled' with 'opacity' equal to '0.3'</span>
</code></pre>
<h3 id='statefulwithhelpers' class='heading'>StatefulWithHelpers</h3>

<p><code>StatefulWithHelpers</code> protocol inherits from <code>Stateful</code> and allows to deal with <code>state</code> property via functions.</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">MyView</span><span class="p">:</span> <span class="kt">StatefulWithHelpers</span> <span class="p">{</span> <span class="p">}</span>
<span class="c1">//...</span>
<span class="k">let</span> <span class="nv">aView</span> <span class="o">=</span> <span class="kt">MyView</span><span class="p">()</span>
<span class="c1">//...</span>
<span class="n">aView</span><span class="o">.</span><span class="nf">set</span><span class="p">(</span><span class="kt">MyView</span><span class="o">.</span><span class="kt">Normal</span><span class="p">())</span>
<span class="c1">// current state of 'aView' object is 'Normal'</span>
<span class="n">aView</span><span class="o">.</span><span class="nf">set</span><span class="p">(</span><span class="kt">MyView</span><span class="o">.</span><span class="kt">Disabled</span><span class="p">(</span><span class="nv">opacity</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">))</span>
<span class="c1">// current state of 'aView' object is 'Disabled' with 'opacity' equal to '0.3'</span>
<span class="k">try</span><span class="p">?</span> <span class="n">aView</span><span class="o">.</span><span class="nf">update</span><span class="p">(</span><span class="kt">MyView</span><span class="o">.</span><span class="kt">Disabled</span><span class="o">.</span><span class="k">self</span><span class="p">){</span> <span class="nv">$0</span><span class="o">.</span><span class="n">opacity</span> <span class="o">+=</span> <span class="mf">0.2</span> <span class="p">}</span>
<span class="c1">// current state of 'aView' object is 'Disabled' with 'opacity' equal to '0.5'</span>
<span class="k">let</span> <span class="nv">d</span><span class="p">:</span> <span class="kt">MyView</span><span class="o">.</span><span class="kt">Disabled</span> <span class="o">=</span> <span class="k">try!</span> <span class="n">aView</span><span class="o">.</span><span class="nf">currentState</span><span class="p">()</span>
<span class="c1">// 'd' holds an instace of 'Disabled' type with 'opacity' equal to '0.5'</span>
<span class="n">aView</span><span class="o">.</span><span class="nf">resetCurrentState</span><span class="p">()</span>
<span class="c1">// current state of 'aView' object is 'nil'</span>
</code></pre>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2017 <a class="link" href="https://github.com/maximkhatskevich" target="_blank" rel="external">Maxim Khatskevich</a>. All rights reserved. (Last updated: 2017-06-14)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.8.2</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
